
Enum "booking_status_enum" {
  "pending"
  "confirmed"
  "cancelled"
  "completed"
}

Enum "booking_extensions_status_enum" {
  "pending"
  "approved"
  "rejected"
}

Enum "booking_reschedules_status_enum" {
  "pending"
  "approved"
  "rejected"
}

Enum "check_out_requests_status_enum" {
  "pending"
  "approved"
  "rejected"
}

Enum "flexible_pricing_rules_rule_type_enum" {
  "weekend"
  "event"
  "holiday"
  "season"
}

Enum "floors_floor_type_enum" {
  "ground"
  "residential"
  "service"
  "special"
  "penthouse"
}

Enum "guests_gender_enum" {
  "male"
  "female"
  "other"
}

Enum "notifications_type_enum" {
  "cancellation"
  "extension"
  "reschedule"
  "transfer"
  "check_out"
}

Enum "notifications_status_enum" {
  "pending"
  "sent"
  "failed"
}

Enum "payment_payment_type_enum" {
  "deposit"
  "full"
  "qr_code"
  "at_hotel"
  "pay_now_with_vietQR"
}

Enum "payment_status_enum" {
  "pending"
  "completed"
  "failed"
  "refunded"
}

Enum "pricing_history_pricing_mechanism_enum" {
  "cumulative"
  "highest_priority"
  "exclusive"
}

Enum "room_status_enum" {
  "available"
  "occupied"
  "maintenance"
  "cleaning"
}

Enum "room_option_cancellation_policy_type_enum" {
  "free"
  "non_refundable"
  "partial_refunded"
}

Enum "room_option_payment_policy_type_enum" {
  "pay_now"
  "pay_at_hotel"
  "pay_partial"
}

Enum "users_role_enum" {
  "guest"
  "receptionist"
  "manager"
  "admin"
}

Enum "weekend_days_day_of_week_enum" {
  "Monday"
  "Tuesday"
  "Wednesday"
  "Thursday"
  "Friday"
  "Saturday"
  "Sunday"
}

Table "amenities" {
  "amenity_id" int [pk, not null]
  "name" varchar(100) [not null]
  "icon" varchar(50) [default: NULL]
  "icon_lib" varchar(50) [default: NULL]
  "category" varchar(50) [default: NULL]
  "description" text
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "audit_logs" {
  "log_id" int [pk, not null]
  "user_id" bigint [default: NULL]
  "action" varchar(100) [not null]
  "table_name" varchar(50) [not null]
  "record_id" int [not null]
  "description" text
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "bed_types" {
  "id" int [pk, not null, note: 'Khóa chính']
  "type_name" varchar(100) [not null, note: 'Tên loại giường']
  "description" text [note: 'Mô tả loại giường']
  "is_active" tinyint(1) [default: '1', note: 'Trạng thái hoạt động']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  Note: 'Danh sách các loại giường'
}

Table "booking" {
  "booking_id" int [pk, not null, note: 'Khóa chính, mã đặt phòng']
  "booking_code" varchar(55) [not null]
  "user_id" bigint [default: NULL, note: 'Khóa ngoại, mã người dùng (nếu có)']
  "option_id" varchar(50) [default: NULL, note: 'Khóa ngoại, mã tùy chọn phòng']
  "check_in_date" date [not null, note: 'Ngày nhận phòng']
  "check_out_date" date [not null, note: 'Ngày trả phòng']
  "total_price_vnd" decimal(15,2) [not null, note: 'Tổng giá (VND)']
  "guest_count" int [not null, note: 'Số khách']
  "status" booking_status_enum [not null, note: 'Trạng thái đặt phòng']
  "quantity" int [default: NULL]
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian tạo']
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian cập nhật']
  "guest_name" varchar(100) [default: NULL, note: 'Tên khách']
  "guest_email" varchar(255) [default: NULL, note: 'Email khách']
  "guest_phone" varchar(20) [default: NULL, note: 'Số điện thoại khách']
  "room_id" int [default: NULL]
  Note: 'Lưu thông tin đặt phòng'
}

Table "booking_extensions" {
  "extension_id" int [pk, not null]
  "booking_id" int [not null]
  "new_check_out_date" date [not null]
  "additional_fee_vnd" decimal(15,2) [default: '0.00']
  "status" booking_extensions_status_enum [not null, default: 'pending']
  "reason" text
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "booking_reschedules" {
  "reschedule_id" int [pk, not null]
  "booking_id" int [not null]
  "new_check_in_date" date [not null]
  "new_check_out_date" date [not null]
  "additional_fee_vnd" decimal(15,2) [default: '0.00']
  "status" booking_reschedules_status_enum [not null, default: 'pending']
  "reason" text
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "booking_rooms" {
  "id" int [pk, not null]
  "booking_id" int [not null]
  "booking_code" varchar(55) [default: NULL]
  "room_id" int [not null]
  "representative_id" int [default: NULL]
  "price_per_night" bigint [not null]
  "nights" int [not null]
  "total_price" bigint [not null]
  "check_in_date" date [default: NULL]
  "check_out_date" date [default: NULL]
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "cancellation_policies" {
  "policy_id" int [pk, not null]
  "name" varchar(100) [not null]
  "free_cancellation_days" int [default: NULL, note: 'Số ngày trước check-in được hủy miễn phí']
  "penalty_percentage" decimal(5,2) [default: NULL, note: 'Phạt hủy (%)']
  "penalty_fixed_amount_vnd" decimal(15,2) [default: NULL, note: 'Phạt hủy cố định (VND)']
  "description" text
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "check_out_policies" {
  "policy_id" int [pk, not null]
  "name" varchar(100) [not null]
  "early_check_out_fee_vnd" decimal(15,2) [default: NULL]
  "late_check_out_fee_vnd" decimal(15,2) [default: NULL]
  "late_check_out_max_hours" int [default: NULL, note: 'Số giờ tối đa trả phòng muộn']
  "early_check_out_max_hours" int [default: NULL]
  "description" text
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "check_out_requests" {
  "request_id" int [pk, not null]
  "booking_id" int [not null]
  "type" varchar(255) [default: NULL]
  "requested_check_out_time" datetime [not null]
  "fee_vnd" decimal(15,2) [default: '0.00']
  "status" check_out_requests_status_enum [not null, default: 'pending']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "currency" {
  "currency_code" varchar(3) [pk, not null, note: 'Khóa chính, mã tiền tệ (VND, USD, v.v.)']
  "name" varchar(50) [not null, note: 'Tên tiền tệ']
  "exchange_rate" decimal(10,4) [default: NULL, note: 'Tỷ giá so với VND']
  "symbol" varchar(10) [default: NULL, note: 'Ký hiệu tiền tệ (₫, $, v.v.)']
  "format" varchar(50) [default: NULL, note: 'Định dạng (ví dụ: {amount} ₫)']
  Note: 'Lưu thông tin tiền tệ và tỷ giá'
}

Table "datafeeds" {
  "id" bigint [pk, not null]
  "label" varchar(255) [default: NULL]
  "data" float [default: NULL]
  "dataset_name" tinyint [default: NULL]
  "data_type" tinyint [not null, default: '1']
  "created_at" timestamp [default: NULL]
  "updated_at" timestamp [default: NULL]
}

Table "deposit_policies" {
  "policy_id" int [pk, not null]
  "name" varchar(100) [not null]
  "deposit_percentage" decimal(5,2) [default: NULL]
  "deposit_fixed_amount_vnd" decimal(15,2) [default: NULL]
  "description" text
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "dynamic_pricing_rules" {
  "rule_id" int [pk, not null]
  "room_type_id" int [default: NULL]
  "occupancy_threshold" decimal(5,2) [not null, note: 'Ngưỡng tỷ lệ lấp đầy (%)']
  "price_adjustment" decimal(5,2) [not null, note: 'Tỷ lệ điều chỉnh giá (%)']
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "priority" int [not null, default: '5', note: 'Mức độ ưu tiên (1 là cao nhất)']
  "is_exclusive" tinyint(1) [default: '0', note: 'Quy tắc độc quyền khi bật flag']
}

Table "events" {
  "event_id" int [pk, not null]
  "name" varchar(100) [not null]
  "start_date" date [not null]
  "end_date" date [not null]
  "description" text
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "failed_jobs" {
  "id" bigint [pk, not null]
  "uuid" varchar(255) [not null]
  "connection" text [not null]
  "queue" text [not null]
  "payload" longtext [not null]
  "exception" longtext [not null]
  "failed_at" timestamp [not null, default: `CURRENT_TIMESTAMP`]
}

Table "faqs" {
  "faq_id" int [pk, not null]
  "question_en" text [not null, note: 'Câu hỏi (tiếng Anh)']
  "question_vi" text [not null, note: 'Câu hỏi (tiếng Việt)']
  "answer_en" text [not null, note: 'Câu trả lời (tiếng Anh)']
  "answer_vi" text [not null, note: 'Câu trả lời (tiếng Việt)']
  "sort_order" int [default: '0', note: 'Thứ tự sắp xếp câu hỏi']
  "is_active" tinyint(1) [default: '1', note: 'Trạng thái hoạt động (0: không, 1: có)']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian tạo câu hỏi']
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian cập nhật câu hỏi']
  Note: 'Bảng lưu trữ câu hỏi thường gặp và câu trả lời'
}

Table "flexible_pricing_rules" {
  "rule_id" int [pk, not null]
  "room_type_id" int [default: NULL, note: 'Khóa ngoại, mã loại phòng (NULL: áp dụng cho tất cả loại phòng)']
  "rule_type" flexible_pricing_rules_rule_type_enum [not null, note: 'Loại quy tắc: cuối tuần, sự kiện, ngày lễ, mùa']
  "days_of_week" json [default: NULL, note: 'Danh sách ngày cuối tuần áp dụng (JSON, dùng cho rule_type=weekend)']
  "event_id" int [default: NULL, note: 'Khóa ngoại, mã sự kiện (dùng cho rule_type=event)']
  "holiday_id" int [default: NULL, note: 'Khóa ngoại, mã ngày lễ (dùng cho rule_type=holiday)']
  "season_name" varchar(50) [default: NULL, note: 'Tên mùa (dùng cho rule_type=season)']
  "start_date" date [default: NULL, note: 'Ngày bắt đầu áp dụng (dùng cho rule_type=season hoặc giới hạn thời gian)']
  "end_date" date [default: NULL, note: 'Ngày kết thúc áp dụng (dùng cho rule_type=season hoặc giới hạn thời gian)']
  "price_adjustment" decimal(5,2) [not null, note: 'Tỷ lệ điều chỉnh giá (%, dương để tăng, âm để giảm)']
  "is_active" tinyint(1) [default: '1', note: 'Trạng thái kích hoạt']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "priority" int [not null, default: '5', note: 'Mức độ ưu tiên (1 là cao nhất)']
  "is_exclusive" tinyint(1) [default: '0', note: 'Quy tắc độc quyền khi bật flag']
  Note: 'Quy tắc giá linh động cho cuối tuần, sự kiện, ngày lễ, mùa'
}

Table "floors" {
  "floor_id" int [pk, not null, note: 'Khóa chính, mã tầng']
  "floor_number" int [not null, note: 'Số tầng (1-34)']
  "floor_name" varchar(100) [default: NULL, note: 'Tên tầng (Tầng trệt, Tầng 1, etc.)']
  "floor_type" floors_floor_type_enum [default: 'residential', note: 'Loại tầng']
  "description" text [note: 'Mô tả tầng và tiện ích đặc biệt']
  "facilities" text [note: 'Các tiện ích có trên tầng này']
  "is_active" tinyint(1) [default: '1', note: 'Tầng có hoạt động không']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian tạo']
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian cập nhật cuối']
  Note: 'Bảng quản lý các tầng của khách sạn'
}

Table "guests" {
  "guest_id" bigint [pk, not null]
  "user_id" bigint [not null]
  "gender" guests_gender_enum [default: NULL]
  "dob" date [default: NULL, note: 'Ngày sinh']
  "nationality" varchar(100) [default: NULL, note: 'Quốc tịch']
  "passport_number" varchar(50) [default: NULL, note: 'Số hộ chiếu / CMND']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "holidays" {
  "holiday_id" int [pk, not null]
  "name" varchar(100) [not null]
  "start_date" date [not null]
  "end_date" date [default: NULL]
  "description" text
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "hotel" {
  "hotel_id" int [pk, not null, note: 'Khóa chính, mã khách sạn']
  "name" varchar(100) [not null, note: 'Tên khách sạn']
  "address" varchar(255) [default: NULL, note: 'Địa chỉ khách sạn']
  "description" text [note: 'Mô tả khách sạn']
  Note: 'Lưu thông tin khách sạn'
}

Table "hotel_rating" {
  "hotel_id" int [pk, not null, note: 'Khóa chính, mã khách sạn']
  "overall_rating" decimal(3,1) [not null, note: 'Điểm đánh giá tổng thể']
  "total_reviews" int [not null, note: 'Tổng số lượt đánh giá']
  "rating_text" varchar(100) [default: NULL, note: 'Mô tả đánh giá']
  "location" varchar(100) [default: NULL, note: 'Vị trí khách sạn']
  "cleanliness" decimal(3,1) [default: NULL, note: 'Đánh giá sự sạch sẽ']
  "location_rating" decimal(3,1) [default: NULL, note: 'Đánh giá vị trí']
  "facilities" decimal(3,1) [default: NULL, note: 'Đánh giá cơ sở vật chất']
  "service" decimal(3,1) [default: NULL, note: 'Đánh giá dịch vụ']
  "value_for_money" decimal(3,1) [default: NULL, note: 'Đánh giá giá trị đồng tiền']
  Note: 'Lưu đánh giá tổng quan khách sạn'
}

Table "language" {
  "language_code" varchar(10) [pk, not null, note: 'Khóa chính, mã ngôn ngữ (vi, en, v.v.)']
  "name" varchar(50) [not null, note: 'Tên ngôn ngữ (Vietnamese, English, v.v.)']
  Note: 'Lưu danh sách ngôn ngữ hỗ trợ'
}

Table "meal_types" {
  "id" int [pk, not null, note: 'Khóa chính']
  "type_name" varchar(100) [not null, note: 'Tên loại bữa ăn']
  "description" text [note: 'Mô tả bữa ăn']
  "base_price_vnd" decimal(15,2) [default: '0.00', note: 'Giá cơ bản (VND)']
  "is_active" tinyint(1) [default: '1', note: 'Trạng thái hoạt động']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  Note: 'Danh sách các loại bữa ăn'
}

Table "migrations" {
  "id" int [pk, not null]
  "migration" varchar(255) [not null]
  "batch" int [not null]
}

Table "notifications" {
  "notification_id" int [pk, not null]
  "booking_id" int [default: NULL]
  "user_id" bigint [default: NULL]
  "type" notifications_type_enum [not null]
  "message" text [not null]
  "status" notifications_status_enum [not null, default: 'pending']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "payment" {
  "payment_id" int [pk, not null, note: 'Khóa chính, mã thanh toán']
  "booking_id" int [default: NULL, note: 'Khóa ngoại, mã đặt phòng']
  "amount_vnd" decimal(15,2) [not null, note: 'Số tiền thanh toán (VND)']
  "payment_type" payment_payment_type_enum [not null, note: 'Loại thanh toán']
  "status" payment_status_enum [not null, note: 'Trạng thái thanh toán']
  "transaction_id" varchar(100) [default: NULL, note: 'Mã giao dịch (từ cổng thanh toán)']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian tạo']
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`, note: 'Thời gian cập nhật']
  Note: 'Lưu thông tin thanh toán'
}

Table "permissions" {
  "id" int [pk, not null]
  "name" varchar(100) [not null]
  "description" text
  "created_at" timestamp [not null, default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [not null, default: `CURRENT_TIMESTAMP`]
  "parent_id" int [default: NULL]
}

Table "permission_role" {
  "permission_id" int [not null]
  "role_id" int [not null]

  Indexes {
    (permission_id, role_id) [pk]
  }
}

Table "personal_access_tokens" {
  "id" bigint [pk, not null]
  "tokenable_type" varchar(255) [not null]
  "tokenable_id" bigint [not null]
  "name" varchar(255) [not null]
  "token" varchar(64) [not null]
  "abilities" text
  "last_used_at" timestamp [default: NULL]
  "expires_at" timestamp [default: NULL]
  "created_at" timestamp [default: NULL]
  "updated_at" timestamp [default: NULL]
}

Table "pricing_config" {
  "config_id" int [pk, not null]
  "max_price_increase_percentage" decimal(5,2) [default: '40.00', note: 'Giới hạn tăng giá tối đa (%)']
  "max_absolute_price_vnd" decimal(15,2) [default: '3000000.00', note: 'Giới hạn giá trần tuyệt đối (VND)']
  "use_exclusive_rule" tinyint(1) [default: '0', note: 'Bật chế độ chỉ lấy quy tắc ưu tiên cao nhất']
  "exclusive_rule_type" varchar(50) [default: NULL, note: 'Loại quy tắc độc quyền (event, holiday, season, weekend, occupancy)']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "pricing_history" {
  "history_id" bigint [pk, not null]
  "room_type_id" int [default: NULL, note: 'Khóa ngoại, mã loại phòng']
  "option_id" int [default: NULL, note: 'Khóa ngoại, mã tùy chọn phòng']
  "applied_date" date [not null, note: 'Ngày áp dụng giá']
  "base_price" decimal(12,2) [not null, note: 'Giá gốc']
  "adjusted_price" decimal(12,2) [not null, note: 'Giá sau điều chỉnh']
  "applied_rules" json [default: NULL, note: 'Danh sách quy tắc đã áp dụng (JSON)']
  "occupancy_rate" decimal(5,2) [default: NULL, note: 'Tỷ lệ lấp đầy tại thời điểm áp dụng (%)']
  "pricing_mechanism" pricing_history_pricing_mechanism_enum [not null, default: 'cumulative', note: 'Cơ chế tính giá']
  "notes" text [note: 'Ghi chú bổ sung']
  "created_at" timestamp [default: NULL]
  "updated_at" timestamp [default: NULL]
}

Table "representatives" {
  "id" int [pk, not null]
  "booking_id" int [not null]
  "booking_code" varchar(55) [default: NULL]
  "room_id" int [not null]
  "full_name" varchar(100) [not null]
  "phone_number" varchar(20) [default: NULL]
  "email" varchar(100) [default: NULL]
  "id_card" varchar(50) [default: NULL]
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "roles" {
  "id" int [pk, not null]
  "name" varchar(50) [not null]
  "description" text
  "created_at" timestamp [not null, default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [not null, default: `CURRENT_TIMESTAMP`]
}

Table "role_user" {
  "user_id" bigint [not null]
  "role_id" int [not null]

  Indexes {
    (user_id, role_id) [pk]
  }
}

Table "room" {
  "room_id" int [pk, not null, note: 'Khóa chính, mã phòng']
  "room_type_id" int [not null, note: 'Khóa ngoại, mã loại phòng']
  "name" varchar(100) [not null, note: 'Tên phòng']
  "image" varchar(255) [default: NULL, note: 'Đường dẫn ảnh chính']
  "floor_id" int [default: NULL, note: 'Tầng của phòng']
  "bed_type_fixed" int [default: NULL, note: 'Loại giường mặc định']
  "status" room_status_enum [default: NULL]
  "description" text [note: 'Mô tả chi tiết phòng']
  "last_cleaned" datetime [default: NULL]
  "created_at" datetime [default: `CURRENT_TIMESTAMP`]
  "updated_at" datetime [default: `CURRENT_TIMESTAMP`]
  Note: 'Lưu thông tin phòng'
}

Table "room_availability" {
  "availability_id" int [pk, not null, note: 'Khóa chính, mã lịch']
  "option_id" varchar(50) [default: NULL, note: 'Khóa ngoại, mã tùy chọn phòng']
  "date" date [not null, note: 'Ngày áp dụng']
  "total_rooms" int [not null, note: 'Tổng số phòng']
  "available_rooms" int [not null, note: 'Số phòng còn trống']
  "created_at" date [not null]
  "updated_at" date [default: NULL]
  Note: 'Lưu lịch đặt phòng theo ngày'
}

Table "room_bed_types" {
  "room_id" int [pk, not null, note: 'Khóa chính']
  "bed_type_id" int [not null, note: 'Khóa ngoại, mã loại giường']
  "quantity" int [default: '1', note: 'Số lượng giường loại này']
  "is_default" tinyint(1) [default: '0', note: 'Có phải tùy chọn mặc định']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  Note: 'Bảng trung gian: Phòng - Loại giường'
}

Table "room_meal_types" {
  "room_id" int [pk, not null, note: 'Khóa chính, khóa ngoại']
  "is_default" tinyint(1) [default: '0']
  "meal_type_id" int [not null, note: 'Khóa ngoại, mã loại bữa ăn']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  Note: 'Bảng trung gian: Phòng - Loại bữa ăn'
}

Table "room_occupancy" {
  "occupancy_id" int [pk, not null]
  "room_type_id" int [not null]
  "date" date [not null]
  "total_rooms" int [not null, note: 'Tổng số phòng của loại phòng']
  "booked_rooms" int [not null, note: 'Số phòng đã được đặt']
  "occupancy_rate" decimal(5,2) [note: 'Tỷ lệ lấp đầy (%)']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "room_option" {
  "option_id" varchar(50) [pk, not null, note: 'Khóa chính, mã tùy chọn']
  "room_id" int [default: NULL, note: 'Khóa ngoại, mã phòng']
  "name" varchar(100) [not null, note: 'Tên tùy chọn']
  "price_per_night_vnd" decimal(15,2) [not null, note: 'Giá mỗi đêm (VND)']
  "max_guests" int [not null, note: 'Số khách tối đa']
  "min_guests" int [not null, note: 'Số khách tối thiểu']
  "cancellation_policy_type" room_option_cancellation_policy_type_enum [not null]
  "cancellation_penalty" decimal(5,2) [default: NULL, note: 'Phạt hủy (%)']
  "cancellation_description" varchar(255) [default: NULL, note: 'Mô tả chính sách hủy']
  "free_until" datetime [default: NULL, note: 'Hủy miễn phí đến thời điểm']
  "payment_policy_type" room_option_payment_policy_type_enum [not null]
  "payment_description" varchar(255) [default: NULL, note: 'Mô tả thanh toán']
  "urgency_message" varchar(255) [default: NULL, note: 'Thông báo khan hiếm']
  "most_popular" tinyint(1) [default: '0', note: 'Tùy chọn phổ biến nhất']
  "recommended" tinyint(1) [default: '0', note: 'Tùy chọn được đề xuất']
  "meal_type" int [default: NULL, note: 'Khóa ngoại, mã bữa ăn']
  "bed_type" int [default: NULL, note: 'Khóa ngoại, mã tùy chọn giường']
  "recommendation_score" decimal(5,2) [default: NULL]
  "deposit_percentage" decimal(5,2) [default: NULL, note: 'Phần trăm đặt cọc (%)']
  "deposit_fixed_amount_vnd" decimal(15,2) [default: NULL, note: 'Số tiền đặt cọc cố định (VND)']
  "deposit_policy_id" int [default: NULL]
  "cancellation_policy_id" int [default: NULL]
  "package_id" int [default: NULL]
  "adjusted_price" decimal(15,2) [default: NULL, note: 'Giá sau khi áp dụng các quy tắc']
  Note: 'Lưu tùy chọn giá và dịch vụ của phòng'
}

Table "room_option_promotion" {
  "promotion_id" int [pk, not null, note: 'Khóa chính, mã khuyến mãi']
  "option_id" varchar(50) [default: NULL, note: 'Khóa ngoại, mã tùy chọn']
  "type" varchar(50) [not null, note: 'Loại khuyến mãi (hot, limited)']
  "message" varchar(255) [not null, note: 'Thông điệp khuyến mãi']
  "discount" decimal(5,2) [default: NULL, note: 'Mức giảm giá (%)']
  Note: 'Lưu khuyến mãi của tùy chọn phòng'
}

Table "room_price_history" {
  "price_history_id" int [pk, not null]
  "room_type_id" int [not null]
  "date" date [not null]
  "base_price" decimal(15,2) [not null, note: 'Giá cơ bản']
  "adjusted_price" decimal(15,2) [not null, note: 'Giá sau điều chỉnh']
  "applied_rules" json [default: NULL, note: 'Danh sách quy tắc áp dụng (ID và loại quy tắc)']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "room_transfers" {
  "transfer_id" int [pk, not null]
  "booking_id" int [not null]
  "old_room_id" int [not null]
  "new_room_id" int [not null]
  "reason" text
  "additional_fee_vnd" decimal(15,2) [default: '0.00']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "room_types" {
  "room_type_id" int [pk, not null]
  "room_code" varchar(50) [not null]
  "name" varchar(100) [not null]
  "description" text
  "total_room" int [not null]
  "base_price" decimal(10,2) [not null]
  "room_area" int [not null]
  "view" varchar(50) [default: NULL]
  "rating" int [default: '0']
  "max_guests" int [default: '0']
  "is_active" tinyint [default: '1']
}

Table "room_type_amenity" {
  "room_type_id" int [not null]
  "amenity_id" int [not null]
  "is_highlighted" tinyint(1) [default: '0']
  "created_at" timestamp [default: NULL]
  "updated_at" timestamp [default: NULL]

  Indexes {
    (room_type_id, amenity_id) [pk]
  }
}

Table "room_type_image" {
  "image_id" int [pk, not null, note: 'Khóa chính, mã ảnh']
  "room_type_id" int [default: NULL, note: 'Khóa ngoại, mã phòng']
  "alt_text" text
  "image_path" varchar(255) [default: NULL, note: 'Đường dẫn ảnh thư mục gốc']
  "image_url" varchar(255) [default: NULL, note: 'Đường dẫn ảnh API']
  "is_main" tinyint(1) [default: '0', note: 'Ảnh chính']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
  Note: 'Lưu danh sách ảnh của phòng'
}

Table "room_type_package" {
  "package_id" int [pk, not null]
  "room_type_id" int [not null]
  "name" varchar(50) [not null]
  "price_modifier_vnd" decimal(15,2) [default: '0.00']
  "include_all_services" tinyint(1) [default: '0']
  "description" text
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "room_type_service" {
  "id" int [pk, not null]
  "room_type_id" int [not null]
  "service_id" int [not null]
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "services" {
  "service_id" int [pk, not null]
  "name" varchar(100) [not null]
  "description" text
  "price_vnd" decimal(15,2) [not null, default: '0.00']
  "unit" varchar(50) [default: NULL, note: 'Ví dụ: lần, ngày, giờ, kg']
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Table "sessions" {
  "id" varchar(255) [pk, not null]
  "user_id" bigint [default: NULL]
  "ip_address" varchar(45) [default: NULL]
  "user_agent" text
  "payload" text [not null]
  "last_activity" int [not null]
}

Table "table_translation" {
  "id" bigint [pk, not null]
  "table_name" varchar(255) [not null]
  "display_name" varchar(255) [default: NULL]
  "is_active" tinyint(1) [not null, default: '1']
  "created_at" timestamp [default: NULL]
  "updated_at" timestamp [default: NULL]
}

Table "translation" {
  "translation_id" int [pk, not null, note: 'Khóa chính, mã bản dịch']
  "table_name" varchar(50) [not null, note: 'Tên bảng (room, hotel, v.v.)']
  "column_name" varchar(50) [not null, note: 'Tên cột (name, description, v.v.)']
  "record_id" int [not null, note: 'Mã bản ghi']
  "language_code" varchar(10) [not null, note: 'Mã ngôn ngữ (vi, en, v.v.)']
  "value" text [not null, note: 'Giá trị bản dịch']
  Note: 'Lưu bản dịch cho các trường văn bản'
}

Table "users" {
  "id" bigint [pk, not null]
  "name" varchar(255) [not null]
  "email" varchar(255) [not null]
  "email_verified_at" timestamp [default: NULL]
  "password" varchar(255) [not null]
  "phone" varchar(12) [default: NULL, note: 'Số điện thoại']
  "address" varchar(255) [default: NULL, note: 'Địa chỉ']
  "identity_code" varchar(50) [default: NULL, note: 'Số CCCD hoặc số hộ chiếu']
  "role" users_role_enum [default: NULL, note: 'Vai trò']
  "two_factor_secret" text
  "two_factor_recovery_codes" text
  "two_factor_confirmed_at" timestamp [default: NULL]
  "remember_token" varchar(100) [default: NULL]
  "current_team_id" bigint [default: NULL]
  "profile_photo_path" varchar(2048) [default: NULL]
  "created_at" timestamp [default: NULL]
  "updated_at" timestamp [default: NULL]
}

Table "weekend_days" {
  "id" int [pk, not null]
  "day_of_week" weekend_days_day_of_week_enum [not null]
  "is_active" tinyint(1) [default: '1']
  "created_at" timestamp [default: `CURRENT_TIMESTAMP`]
  "updated_at" timestamp [default: `CURRENT_TIMESTAMP`]
}

Ref "audit_logs_ibfk_1":"users"."id" < "audit_logs"."user_id" [delete: set null]

Ref "booking_ibfk_1":"room_option"."option_id" < "booking"."option_id" [delete: restrict]

Ref "fk_booking_room":"room"."room_id" < "booking"."room_id" [delete: set null]

Ref "booking_extensions_ibfk_1":"booking"."booking_id" < "booking_extensions"."booking_id" [delete: cascade]

Ref "booking_reschedules_ibfk_1":"booking"."booking_id" < "booking_reschedules"."booking_id" [delete: cascade]

Ref "booking_rooms_ibfk_1":"booking"."booking_id" < "booking_rooms"."booking_id"

Ref "booking_rooms_ibfk_2":"room"."room_id" < "booking_rooms"."room_id"

Ref "booking_rooms_ibfk_3":"representatives"."id" < "booking_rooms"."representative_id"

Ref "check_out_requests_ibfk_1":"booking"."booking_id" < "check_out_requests"."booking_id" [delete: cascade]

Ref "dynamic_pricing_rules_ibfk_1":"room_types"."room_type_id" < "dynamic_pricing_rules"."room_type_id" [delete: set null]

Ref "flexible_pricing_rules_ibfk_1":"room_types"."room_type_id" < "flexible_pricing_rules"."room_type_id" [delete: set null]

Ref "flexible_pricing_rules_ibfk_2":"events"."event_id" < "flexible_pricing_rules"."event_id" [delete: set null]

Ref "flexible_pricing_rules_ibfk_3":"holidays"."holiday_id" < "flexible_pricing_rules"."holiday_id" [delete: set null]

Ref "fk_guests_user":"users"."id" < "guests"."user_id" [delete: cascade]

Ref "hotel_rating_ibfk_1":"hotel"."hotel_id" < "hotel_rating"."hotel_id" [delete: cascade]

Ref "notifications_ibfk_1":"booking"."booking_id" < "notifications"."booking_id" [delete: set null]

Ref "notifications_ibfk_2":"users"."id" < "notifications"."user_id" [delete: set null]

Ref "payment_ibfk_1":"booking"."booking_id" < "payment"."booking_id" [delete: cascade]

Ref "permission_role_ibfk_1":"permissions"."id" < "permission_role"."permission_id" [delete: cascade]

Ref "permission_role_ibfk_2":"roles"."id" < "permission_role"."role_id" [delete: cascade]

Ref "representatives_ibfk_1":"booking"."booking_id" < "representatives"."booking_id"

Ref "representatives_ibfk_2":"room"."room_id" < "representatives"."room_id"

Ref "role_user_ibfk_1":"users"."id" < "role_user"."user_id" [delete: cascade]

Ref "role_user_ibfk_2":"roles"."id" < "role_user"."role_id" [delete: cascade]

Ref "room_ibfk_2":"room_types"."room_type_id" < "room"."room_type_id" [update: restrict, delete: restrict]

Ref "room_ibfk_3":"bed_types"."id" < "room"."bed_type_fixed" [update: restrict, delete: restrict]

Ref "room_ibfk_4":"floors"."floor_number" < "room"."floor_id" [update: restrict, delete: restrict]

Ref "room_availability_ibfk_1":"room_option"."option_id" < "room_availability"."option_id" [delete: cascade]

Ref "fk_room_bed_type":"bed_types"."id" < "room_bed_types"."bed_type_id" [delete: cascade]

Ref "room_bed_types_ibfk_1":"room"."room_id" < "room_bed_types"."room_id" [update: restrict, delete: restrict]

Ref "fk_room_meal_type":"meal_types"."id" < "room_meal_types"."meal_type_id" [delete: cascade]

Ref "room_meal_types_ibfk_1":"room"."room_id" < "room_meal_types"."room_id" [update: restrict, delete: restrict]

Ref "room_occupancy_ibfk_1":"room_types"."room_type_id" < "room_occupancy"."room_type_id" [delete: cascade]

Ref "fk_room_option_cancellation_policy":"cancellation_policies"."policy_id" < "room_option"."cancellation_policy_id" [delete: set null]

Ref "fk_room_option_deposit_policy":"deposit_policies"."policy_id" < "room_option"."deposit_policy_id" [delete: set null]

Ref "room_option_ibfk_1":"room"."room_id" < "room_option"."room_id" [delete: cascade]

Ref "room_option_ibfk_2":"bed_types"."id" < "room_option"."bed_type" [update: restrict, delete: restrict]

Ref "room_option_ibfk_3":"meal_types"."id" < "room_option"."meal_type" [update: restrict, delete: restrict]

Ref "room_option_ibfk_4":"room_type_package"."package_id" < "room_option"."package_id" [delete: set null]

Ref "room_option_promotion_ibfk_1":"room_option"."option_id" < "room_option_promotion"."option_id" [delete: cascade]

Ref "room_price_history_ibfk_1":"room_types"."room_type_id" < "room_price_history"."room_type_id" [delete: cascade]

Ref "room_transfers_ibfk_1":"booking"."booking_id" < "room_transfers"."booking_id" [delete: cascade]

Ref "room_transfers_ibfk_2":"room"."room_id" < "room_transfers"."old_room_id" [delete: restrict]

Ref "room_transfers_ibfk_3":"room"."room_id" < "room_transfers"."new_room_id" [delete: restrict]

Ref "room_type_image_ibfk_1":"room_types"."room_type_id" < "room_type_image"."room_type_id" [update: restrict, delete: cascade]

Ref "room_type_package_ibfk_1":"room_types"."room_type_id" < "room_type_package"."room_type_id" [delete: cascade]

Ref "room_type_service_ibfk_1":"room_types"."room_type_id" < "room_type_service"."room_type_id" [delete: cascade]

Ref "room_type_service_ibfk_2":"services"."service_id" < "room_type_service"."service_id" [delete: cascade]

Ref "translation_ibfk_1":"language"."language_code" < "translation"."language_code" [delete: cascade]
